var body=document.getElementsByTagName("body")[0],window_game=document.getElementById("window_game"),game_dialog=document.getElementById("game_dialog"),start_level=document.getElementById("start-level"),end_level=document.getElementById("end-level"),end_level_points=document.getElementById("end-level-total-points"),level_layer=document.getElementById("level_layer"),level_layer_clone=level_layer.cloneNode(!1),hero=document.getElementById("hero"),time_value=document.getElementById("time_value"),points_value=document.getElementById("points_value"),falls_value=document.getElementById("falls_value"),fails_value=document.getElementById("fails_value"),level_number_elements=document.getElementsByClassName("level-number"),sound=document.getElementById("sound"),block_map={dom:{}},hero_play_delay=20,block_fade_in_delay=50,scene_bomb_delay=1e3,e_bomb_delay=30,e_block_activate_delay=10,e_block_verde_delay=20,run_points_delay=10,gravity_delay=20,clock_delay=1e3,points_number=parseInt(points_value.innerHTML),falls_number=parseInt(falls_value.innerHTML),fails_number=parseInt(fails_value.innerHTML),level_number=0,block_size=52,hero_size=35,hero_default_top=435,hero_move_pixel=4,block_borders_size=2,level_layer_size=level_layer.offsetHeight,moving_x=!1,current_block_fail,sound_state,level_state="presentation",sound_jump,sound_box_azul,sound_box_laranja,sound_box_vermelha,sound_box_dourada,sound_tic_tac_bomb,sound_bomb_rebenta,valor_cima=-27,gravity=!1,game_complete=0,segundos=0,minutos=0,restantes=0,key_touch_status={set_status:function(a,b){key_touch_status[a].status=b,key_touch_status[a].timestamp=Date.now()},up:{status:!1,timestamp:0},right:{status:!1,timestamp:0},down:{status:!1,timestamp:0},left:{status:!1,timestamp:0}},joystick=new VirtualJoystick({container:document.getElementById("joystick-container"),mouseSupport:!0}),gosquares={start:function(){this.load_media(),this.hero(),this.onresize(),this.game_events.init(),this.level.init(),this.show_sequence()},next_level:function(){level_state="presentation",gravity=!1,game_dialog.style.display="none",this.hero(),this.level.init(),this.show_sequence()},finish:function(){level_state="finish",this.dialog.end()},show_sequence:function(){var a="left",b=function(){"left"==a&&-level_layer.offsetLeft+4<=level_layer.offsetWidth-window_game.offsetWidth?level_layer.style.left=level_layer.offsetLeft-hero_move_pixel+"px":(a="right","right"==a&&level_layer.offsetLeft+4<=0?level_layer.style.left=level_layer.offsetLeft+hero_move_pixel+"px":(level_layer.style.left="0px",clearInterval(c),gosquares.effect.hide_level_numbers_fade_out(),gosquares.dialog.start()))},c=setInterval(b,20)},dialog:{start:function(){level_state="pause",start_level.style.display="block",end_level.style.display="none",game_dialog.style.display="block"},end:function(){function a(){b>=0&&parseInt(.1*points_number)>=b?(b+=2,end_level_points.innerHTML=b):parseInt(.1*points_number)+1<=b&&b<=parseInt(.3*points_number)?(b+=4,end_level_points.innerHTML=b):parseInt(.3*points_number)+1<=b&&b<=parseInt(.8*points_number)?(b+=6,end_level_points.innerHTML=b):parseInt(.8*points_number)+1<=b&&b<=parseInt(.9*points_number)?(b+=4,end_level_points.innerHTML=b):b>=parseInt(.9*points_number)+1&&points_number>b&&points_number>b+2?(b+=2,end_level_points.innerHTML=b):(clearInterval(c),end_level_points.innerHTML=points_number)}start_level.style.display="none",end_level.style.display="block",game_dialog.style.display="block";var b=1,c=setInterval(a,run_points_delay)}},state:{level_blocks:""},level:{background:function(){level_layer.style.left="0";var a="";switch(level_number){case 1:case 2:case 3:a="url('min/images/fundo_1.png')";break;case 4:case 5:case 6:a="url('min/images/fundo_2.png')";break;case 7:a="url('min/images/fundo_3.png')"}level_layer.style.cssText+="background: "+a+" left bottom;",hero.style.cssText+='background: url("min/images/hero.png"); '},number:function(){level_number++;for(var a=level_number_elements.length-1;a>=0;--a)level_number_elements[a].innerHTML=level_number},generate:{render_blocks:function(a,b){var c,d,e,f=a.normal_blocks,g=a.jump_blocks,h=(a.green_blocks,a.stone_blocks);block_map.dom.block_number={},block_map.dom.block_number[b]={},block_map.dom.normal_blocks={},block_map.dom.jump_blocks={},block_map.dom.stone_blocks={};for(var i=0;i<f.length;i++)f[i].when&&1!==f[i].when||(d="",d=document.createElement("div"),d.setAttribute("class","block_number b_number_"+b+"_normal_"+(i+1)),d.style.opacity=.8,d.innerHTML=i+1,e="",e=document.createElement("div"),e.setAttribute("class","block b_"+b+"_normal_"+(i+1)),e.style.cssText="position:absolute;left:"+f[i].left+"px;bottom:"+f[i].bottom+"px;z-index:10;width:"+block_size+"px;height:"+block_size+'px;background:url("min/images/inactivo.png");border:solid 1px #2f0000;',e.appendChild(d),level_layer.appendChild(e),i===f.length-1&&e.setAttribute("class",e.getAttribute("class")+" block dourado"),block_map.dom.normal_blocks["b_"+b+"_normal_"+(i+1)]=e,block_map.dom.block_number[b]["b_number_"+b+"_normal_"+(i+1)]=d);if(void 0!==g)for(var j=0;j<g.length;j++)c=g[j].when&&1!==g[j].when?"none":"block",e="",e=document.createElement("div"),e.setAttribute("class","block b_"+b+"_jump_"+(j+1)),e.style.cssText="position:absolute;left:"+g[j].left+"px;bottom:"+g[j].bottom+"px;z-index:10;width:"+block_size+"px;height:"+block_size+'px;background:url("min/images/vermelho.png");display:'+c+";border:dashed 1px #ffffff;",level_layer.appendChild(e),block_map.dom.jump_blocks["b_"+b+"_jump_"+(j+1)]=e;if(void 0!==h)for(var k=0;k<h.length;k++)c=h[k].when&&1!==h[k].when?"none":"block",e="",e=document.createElement("div"),e.setAttribute("class","block b_"+b+"_stone_"+(k+1)),e.style.cssText="position:absolute;left:"+h[k].left+"px;bottom:"+h[k].bottom+"px;z-index:10;width:"+block_size+"px;height:"+block_size+'px;background:url("min/images/cinzento.png");display:'+c+";border:solid 1px #2f0000;",level_layer.appendChild(e),block_map.dom.stone_blocks["b_"+b+"_stone_"+(k+1)]=e},level_1:function(){var a={};a.normal_blocks=[{left:250,bottom:70},{left:400,bottom:70},{left:550,bottom:70},{left:650,bottom:115},{left:750,bottom:170},{left:900,bottom:220},{left:1100,bottom:220},{left:1e3,bottom:320},{left:1e3,bottom:120},{left:1e3,bottom:220}],a.jump_blocks=[],gosquares.state.level_blocks=a,this.render_blocks(a,1)},level_2:function(){var a={};a.normal_blocks=[{left:250,bottom:70},{left:350,bottom:150},{left:250,bottom:230},{left:350,bottom:300},{left:600,bottom:300},{left:600,bottom:100},{left:600,bottom:200},{left:900,bottom:250},{left:700,bottom:200},{left:800,bottom:200},{left:1060,bottom:180},{left:1200,bottom:250},{left:1300,bottom:300}],a.jump_blocks=[{left:parseInt((a.normal_blocks[0].left+a.normal_blocks[a.normal_blocks.length-1].left)/2),bottom:30,when:.5}],gosquares.state.level_blocks=a,this.render_blocks(a,2)},level_3:function(){var a={};a.normal_blocks=[{left:100,bottom:74},{left:200,bottom:74},{left:300,bottom:74},{left:150,bottom:150},{left:250,bottom:150},{left:200,bottom:220},{left:400,bottom:350},{left:475,bottom:250},{left:550,bottom:350},{left:625,bottom:250},{left:550,bottom:150},{left:700,bottom:350},{left:775,bottom:250},{left:700,bottom:150},{left:850,bottom:350},{left:950,bottom:330},{left:1050,bottom:250},{left:1700,bottom:300}],a.jump_blocks=[{left:625,bottom:30,when:.3},{left:1150,bottom:200,when:.6},{left:1400,bottom:250,when:.7}],gosquares.state.level_blocks=a,this.render_blocks(a,3)},level_4:function(){var a={};a.normal_blocks=[{left:100,bottom:210},{left:150,bottom:210},{left:250,bottom:210},{left:250,bottom:290},{left:330,bottom:290},{left:330,bottom:210},{left:450,bottom:110},{left:450,bottom:190},{left:530,bottom:190},{left:530,bottom:110},{left:490,bottom:330},{left:650,bottom:310},{left:650,bottom:390},{left:730,bottom:390},{left:730,bottom:310},{left:700,bottom:190},{left:800,bottom:190},{left:900,bottom:190},{left:950,bottom:190},{left:1100,bottom:240},{left:1200,bottom:340},{left:1300,bottom:340},{left:1400,bottom:240},{left:1400,bottom:140},{left:1300,bottom:40},{left:1200,bottom:40},{left:1100,bottom:140},{left:1200,bottom:240},{left:1300,bottom:240},{left:1300,bottom:140},{left:1200,bottom:140},{left:1250,bottom:190}],a.jump_blocks=[{left:parseInt((a.normal_blocks[0].left+a.normal_blocks[a.normal_blocks.length-1].left)/2),bottom:30,when:.5}],a.stone_blocks=[{left:0,bottom:30},{left:50,bottom:30},{left:100,bottom:30},{left:100,bottom:120},{left:50,bottom:120},{left:0,bottom:210},{left:50,bottom:210},{left:290,bottom:250},{left:490,bottom:150},{left:690,bottom:350},{left:650,bottom:190},{left:750,bottom:190},{left:850,bottom:190},{left:1150,bottom:290},{left:1250,bottom:290},{left:1350,bottom:290},{left:1150,bottom:190},{left:1350,bottom:190},{left:1150,bottom:90},{left:1250,bottom:90},{left:1350,bottom:90}],gosquares.state.level_blocks=a,this.render_blocks(a,4)},level_5:function(){var a={};a.normal_blocks=[{left:20,bottom:30},{left:30,bottom:110},{left:40,bottom:190},{left:30,bottom:270},{left:20,bottom:340},{left:130,bottom:190},{left:200,bottom:230},{left:300,bottom:230},{left:340,bottom:280},{left:400,bottom:380},{left:500,bottom:285},{left:350,bottom:130},{left:550,bottom:130},{left:600,bottom:130},{left:560,bottom:230},{left:640,bottom:330},{left:650,bottom:30},{left:200,bottom:130},{left:850,bottom:190}],a.jump_blocks=[{left:200,bottom:30,when:.6}],a.stone_blocks=[{left:200,bottom:480},{left:250,bottom:480},{left:300,bottom:480},{left:350,bottom:480},{left:400,bottom:480},{left:450,bottom:480},{left:500,bottom:480},{left:550,bottom:480},{left:600,bottom:480},{left:650,bottom:480},{left:0,bottom:30},{left:0,bottom:80},{left:0,bottom:130},{left:0,bottom:180},{left:0,bottom:230},{left:0,bottom:280},{left:0,bottom:330},{left:0,bottom:380},{left:0,bottom:430},{left:0,bottom:480},{left:50,bottom:480},{left:100,bottom:480},{left:150,bottom:480},{left:150,bottom:30},{left:150,bottom:80},{left:150,bottom:130},{left:150,bottom:180},{left:150,bottom:230},{left:150,bottom:280},{left:150,bottom:330},{left:150,bottom:380},{left:250,bottom:430},{left:250,bottom:380},{left:250,bottom:330},{left:250,bottom:230},{left:250,bottom:180},{left:250,bottom:130},{left:250,bottom:30},{left:350,bottom:230},{left:350,bottom:280},{left:350,bottom:330},{left:350,bottom:380},{left:450,bottom:380},{left:300,bottom:130},{left:400,bottom:130},{left:450,bottom:130},{left:500,bottom:130},{left:350,bottom:80},{left:450,bottom:30},{left:550,bottom:430},{left:550,bottom:380},{left:550,bottom:330},{left:550,bottom:280},{left:500,bottom:280},{left:450,bottom:280},{left:450,bottom:180},{left:550,bottom:230},{left:550,bottom:80},{left:650,bottom:130},{left:650,bottom:180},{left:650,bottom:230},{left:650,bottom:280},{left:650,bottom:330},{left:650,bottom:380},{left:700,bottom:480},{left:750,bottom:480},{left:750,bottom:430},{left:750,bottom:380},{left:750,bottom:330},{left:750,bottom:230},{left:750,bottom:180},{left:750,bottom:130},{left:750,bottom:80},{left:750,bottom:30},{left:800,bottom:230},{left:800,bottom:180},{left:850,bottom:180},{left:900,bottom:180},{left:900,bottom:230},{left:900,bottom:280},{left:900,bottom:330},{left:850,bottom:330},{left:800,bottom:330}],gosquares.state.level_blocks=a,this.render_blocks(a,5)},level_6:function(){var a,b,c,d,e=[],f=[],g=[],h=[150,200,250,150,400,500,450,450,650,650,950,1e3,950,900,1e3,1100,1150,1200,1250,1300,1350,1400],i=[80,80,80,180,130,130,130,300,80,275,380,180,180,30,30,30,80,130,130,230,280,30],j=[100,100,100,200,200,200,300,300,300,450,450,450,600,700,600,650,700,850,850,850,850,850,850,850,850,850,900,950,1e3,1050,1050,1050,1050,1050,1050,1050,1050,950,950,950,950,1050,1e3,1300,1200,1350,1150,1200,1250,1300,1350,1450,1200,1250,1300,1350,1450,1300,1350,1450,1300,1350,1450,1350,1450,1450,1450,1450,1450,1450],k=[80,130,180,30,180,230,80,130,180,30,80,400,80,80,30,30,30,30,80,130,180,230,280,380,430,480,480,480,480,480,430,380,330,280,230,180,130,280,330,130,30,30,130,180,80,230,30,30,30,30,30,30,80,80,80,80,80,130,130,130,180,180,180,230,230,280,330,380,430,480],l=[parseInt((h[0]+h[h.length-1])/2),515,800,650,900,1250,1400,1400,1400,1400,1400,1400],m=[30,300,330,130,280,180,80,130,180,230,280,330],n=0,o=0,p=h.length,q=j.length,r=l.length,s="solid 1px #ffffff;",t="";for(c=0;r>c;c++)o++,g[c]=document.createElement("div"),g[c].setAttribute("class","aux aux_"+o),0===c&&(g[c].setAttribute("id","aux_vermelho"),d="vermelho",t="display:none"),r>c&&c>0&&(g[c].setAttribute("id","aux_verde"),d="inactivo",s="solid 1px #333333;"),g[c].style.cssText="position:absolute;left:"+l[c]+"px;bottom:"+m[c]+"px;z-index:10;width:"+block_size+"px;height:"+block_size+'px;background:url("min/images/'+d+'.png");'+t+"border:"+s,level_layer.appendChild(g[c]);for(a=0;p>a;a++)n++,e[a]=document.createElement("div"),e[a].setAttribute("class","block b_"+n),e[a].style.cssText="position:absolute;left:"+h[a]+"px;bottom:"+i[a]+"px;z-index:10;width:"+block_size+"px;height:"+block_size+'px;background:url("min/images/inactivo.png");border:solid 1px #333333;',level_layer.appendChild(e[a]),a===h.length-1&&e[a].setAttribute("class",e[a].getAttribute("class")+"block dourado"),6!==a&&8!==a&&15!==a||e[a].setAttribute("class",e[a].getAttribute("class")+" vermelho"),1!==a&&7!==a&&10!==a&&18!==a&&20!==a||(n++,e[a].setAttribute("class",e[a].getAttribute("class")+" laranja_3"),e[a].setAttribute("class",e[a].getAttribute("class")+" b_"+n),n++,e[a].setAttribute("class",e[a].getAttribute("class")+" b_"+n));for(b=0;q>b;b++)f[b]=document.createElement("div"),f[b].setAttribute("class","stone"),f[b].style.cssText="position:absolute;left:"+j[b]+"px;bottom:"+k[b]+"px;z-index:10;width:"+block_size+"px;height:"+block_size+'px;background:url("min/images/cinzento.png");border:solid 1px #000000;',level_layer.appendChild(f[b])},level_7:function(){var a,b,c,d,e=[],f=[],g=[],h=[400,350,300,500,450,500,450,400,350,600,700,750,700,600,800,900,1e3,1e3],i=[30,100,100,100,100,330,380,380,380,380,330,330,180,230,80,280,80,400],j=[80,0,160,80,200,150,250,250,250,250,250,250,250,250,250,250,300,350,400,450,500,350,350,400,450,300,350,400,450,500,550,600,650,700,750,550,550,550,550,550,550,550,550,550,600,650,700,700,700,750,700,800,850,850,850,850,850,850,850,900,850,850,850,800,750,700,650,600,600,650,750,800,700,700,900,900,950,900,950,1e3,1100,1150,900,950,1e3,1050,1100,1150,1200,900,950,1e3,1050,1100,1150,1200,1250,950,1e3,1050,1100,1150,1200,1250,1300,900,950,1e3,1050,1100,1150,1200,1250,1300,1350,900,950,1e3,1050,1100,1150,1200,1250,1300,1350,1400,900,950,1e3,1050,1100,1150,1200,1250,1300,1350,1400,1450],k=[140,240,240,340,390,490,80,130,180,230,330,380,430,480,30,280,230,230,230,230,230,280,330,330,330,480,480,480,480,480,480,480,480,480,480,430,380,330,280,230,180,130,80,30,330,330,380,430,280,280,330,480,480,430,380,330,280,230,180,180,130,80,30,30,30,30,30,30,180,180,180,180,80,130,430,380,380,330,330,330,330,330,280,280,280,280,280,280,280,230,230,230,230,230,230,230,230,180,180,180,180,180,180,180,180,130,130,130,130,130,130,130,130,130,130,80,80,80,80,80,80,80,80,80,80,80,30,30,30,30,30,30,30,30,30,30,30,30],l=[parseInt((h[0]+h[h.length-1])/2),300,800,650,650],m=[30,330,330,80,380],n=0,o=0,p=h.length,q=j.length,r=l.length,s="solid 1px #ffffff;",t="block";for(c=0;r>c;c++)o++,g[c]=document.createElement("div"),g[c].setAttribute("class","aux aux_"+o),0===c&&(g[c].setAttribute("id","aux_vermelho"),d="vermelho",t="display:none;"),r>c&&c>0&&(g[c].setAttribute("id","aux_verde"),d="inactivo",s="solid 1px #333333;",t="display:block;"),g[c].style.cssText="position:absolute;left:"+l[c]+"px;bottom:"+m[c]+"px;z-index:10;width:"+block_size+"px;height:"+block_size+'px;background:url("min/images/'+d+'.png");'+t+"border:"+s,level_layer.appendChild(g[c]);for(a=0;p>a;a++)n++,e[a]=document.createElement("div"),e[a].setAttribute("class","block b_"+n),e[a].style.cssText="position:absolute;left:"+h[a]+"px;bottom:"+i[a]+"px;z-index:10;width:"+block_size+"px;height:"+block_size+'px;background:url("min/images/inactivo.png");border:solid 1px #333333;',level_layer.appendChild(e[a]),a===h.length-1&&e[a].setAttribute("class",e[a].getAttribute("class")+"block dourado"),0!==a&&12!==a&&14!==a||e[a].setAttribute("class",e[a].getAttribute("class")+" vermelho"),2!==a&&3!==a&&6!==a&&8!==a&&10!==a&&13!==a&&15!==a||(n++,e[a].setAttribute("class",e[a].getAttribute("class")+" laranja_3"),e[a].setAttribute("class",e[a].getAttribute("class")+" b_"+n),n++,e[a].setAttribute("class",e[a].getAttribute("class")+" b_"+n));for(b=0;q>b;b++)f[b]=document.createElement("div"),f[b].setAttribute("class","stone"),f[b].style.cssText="position:absolute;left:"+j[b]+"px;bottom:"+k[b]+"px;z-index:10;width:"+block_size+"px;height:"+block_size+'px;background:url("min/images/cinzento.png");border:solid 1px #000000;',level_layer.appendChild(f[b]),14!==b&&15!==b&&18!==b&&35!==b&&46!==b&&50!==b&&58!==b&&59!==b&&60!==b&&69!==b&&72!==b&&77!==b&&78!==b&&80!==b&&82!==b&&83!==b&&86!==b&&87!==b&&89!==b&&90!==b&&91!==b&&94!==b&&98!==b&&100!==b&&101!==b&&107!==b&&108!==b&&109!==b&&117!==b||f[b].setAttribute("class",f[b].getAttribute("class")+" dinamite")},layer:function(){var a=level_layer_clone.cloneNode(!0),b=level_layer;switch(level_layer=a,a.appendChild(hero),window_game.appendChild(a),b.style.display="none",b.setAttribute("id","level_"+parseInt(level_number-1)),level_number){case 1:this.level_1();break;case 2:this.level_2();break;case 3:this.level_3();break;case 4:this.level_4();break;case 5:this.level_5();break;case 6:this.level_6();break;case 7:this.level_7()}}},init:function(){this.number(),this.generate.layer(),this.background()}},counters:{clock:function(){"start"===level_state&&(minutos=parseInt(segundos/60),restantes=segundos-60*minutos,10>minutos?10>restantes?time_value.innerHTML="0"+minutos+" : 0"+restantes:restantes>9&&(time_value.innerHTML="0"+minutos+" : "+restantes):minutos>9&&(10>restantes?time_value.innerHTML=minutos+" : 0"+restantes:restantes>9&&(time_value.innerHTML=minutos+" : "+restantes)),segundos++)},level:function(){},time:function(){},points:function(a){var b=a?a:100;points_value.innerHTML=points_number+=b},fails:function(){fails_value.innerHTML=fails_number+=1},falls:function(){falls_value.innerHTML=falls_number+=1}},load_media:function(){var a,b,c,d,e=[],f=[];for(e=["hero","fundo","fundo_1","fundo_2","fundo_3","fundo_4","inactivo","activo","vermelho","dourado"],c=0;c<e.length;c++)a=new Image,a.src="min/images/"+e[c]+".png";for(f=["jump","fundo","box_azul","box_dourada","box_vermelha","box_laranja"],d=0;d<f.length;d++)b=new Audio,b.src="src/fx/mp3/"+f[d]+".mp3";sound_jump=new Audio("src/fx/mp3/jump.mp3"),sound_box_azul=new Audio("src/fx/mp3/box_azul.mp3"),sound_box_laranja=new Audio("src/fx/mp3/box_laranja.mp3"),sound_box_vermelha=new Audio("src/fx/mp3/box_vermelha.mp3"),sound_box_dourada=new Audio("src/fx/mp3/box_dourada.mp3"),sound_tic_tac_bomb=new Audio("src/fx/mp3/tic_tac_bomba.mp3"),sound_bomb_rebenta=new Audio("src/fx/mp3/bomba_rebenta.mp3")},removerfx:function(){sound.setAttribute("class","silencio")},onresize:function(){var a=window.innerWidth,b=window.innerHeight,c=window.getComputedStyle(game_dialog,null),d=parseInt(c.width);window_game.offsetWidth>a&&(window_game.style.width=a-2*hero_move_pixel+"px");var e=(a-window_game.offsetWidth)/2,f=(b-window_game.offsetHeight)/2;window_game.style.top=f+"px",window_game.style.left=e+"px",window_game.style.opacity="1",game_dialog.style.left=(window_game.offsetWidth-d)/2+"px"},game_events:{keyup:function(a){var b=a.keyCode;37===b?(moving_x=!1,key_touch_status.set_status("left",!1),hero.setAttribute("class",hero.getAttribute("class").replace("left_init","left_stop"))):39===b&&(moving_x=!1,key_touch_status.set_status("right",!1),hero.setAttribute("class",hero.getAttribute("class").replace("right_init","right_stop")))},keydown:function(a){var b=a.keyCode;if("start"===level_state){var c=-1!==hero.getAttribute("class").search("up_init"),d=(-1!==hero.getAttribute("class").search("left_init"),-1!==hero.getAttribute("class").search("down_init"));-1!==hero.getAttribute("class").search("right_init");switch(b){case 37:moving_x=!0,key_touch_status.set_status("left",!0),hero.setAttribute("class",hero.getAttribute("class").replace("right_init","right_stop")),hero.setAttribute("class",hero.getAttribute("class").replace("left_stop","left_init"));break;case 38:case 32:c||d||(current_block_fail=!1,key_touch_status.set_status("up",!0),hero.setAttribute("class",hero.getAttribute("class").replace("up_stop","up_init")));break;case 39:moving_x=!0,key_touch_status.set_status("right",!0),hero.setAttribute("class",hero.getAttribute("class").replace("left_init","left_stop")),hero.setAttribute("class",hero.getAttribute("class").replace("right_stop","right_init"))}}else"pause"!==level_state&&"finish"!==level_state||32!==b&&13!==b||("finish"===level_state?gosquares.next_level():"pause"===level_state&&gosquares.game_events.gravity())},touchstart:function(a){if("start"===level_state){var b=-1!==hero.getAttribute("class").search("up_init"),c=(-1!==hero.getAttribute("class").search("left_init"),-1!==hero.getAttribute("class").search("down_init")),d=(-1!==hero.getAttribute("class").search("right_init"),hero.getBoundingClientRect());!b&&!c&&d.top>a.changedTouches[0].pageY&&(current_block_fail=!1,key_touch_status.set_status("up",!0),hero.setAttribute("class",hero.getAttribute("class").replace("up_stop","up_init"))),d.left+hero_size<a.changedTouches[0].pageX?(moving_x=!0,key_touch_status.set_status("right",!0),hero.setAttribute("class",hero.getAttribute("class").replace("left_init","left_stop")),hero.setAttribute("class",hero.getAttribute("class").replace("right_stop","right_init"))):d.left>a.changedTouches[0].pageX&&(moving_x=!0,key_touch_status.set_status("left",!0),hero.setAttribute("class",hero.getAttribute("class").replace("right_init","right_stop")),hero.setAttribute("class",hero.getAttribute("class").replace("left_stop","left_init")))}},touchend:function(a){moving_x=!1,key_touch_status.set_status("right",!1),key_touch_status.set_status("left",!1),hero.setAttribute("class",hero.getAttribute("class").replace("right_init","right_stop")),hero.setAttribute("class",hero.getAttribute("class").replace("left_init","left_stop"))},touchmove:function(a){if("start"===level_state){var b=-1!==hero.getAttribute("class").search("up_init"),c=(-1!==hero.getAttribute("class").search("left_init"),-1!==hero.getAttribute("class").search("down_init"));-1!==hero.getAttribute("class").search("right_init");!joystick.up()||b||c||(key_touch_status.set_status("up",!0),hero.setAttribute("class",hero.getAttribute("class").replace("up_stop","up_init"))),joystick.left()&&(moving_x=!0,key_touch_status.set_status("left",!0),hero.setAttribute("class",hero.getAttribute("class").replace("right_init","right_stop")),hero.setAttribute("class",hero.getAttribute("class").replace("left_stop","left_init"))),joystick.right()&&(moving_x=!0,key_touch_status.set_status("right",!0),hero.setAttribute("class",hero.getAttribute("class").replace("left_init","left_stop")),hero.setAttribute("class",hero.getAttribute("class").replace("right_stop","right_init")))}},gravity:function(){if(!gravity){gravity=!0,level_state="gravity",game_dialog.style.display="none";var a=0,b=0,c=3.12,d=function(){a++,hero.style.webkitTransform="rotate("+b+"deg)",b=c*a,hero.style.top=hero.offsetTop+4+"px",window_game.offsetHeight-hero.offsetHeight-30<=hero.offsetTop&&(hero.style.top=hero_default_top+"px",clearInterval(e),hero.setAttribute("class","right_stop left_stop up_stop down_stop"),window_game.setAttribute("class","inicio"),hero.style.webkitTransform="",level_state="start")},e=setInterval(d,gravity_delay)}},collisions:function(a,b,c,d){var e={},f=(-1!==hero.getAttribute("class").search("up_init"),-1!==hero.getAttribute("class").search("left_init")),g=(-1!==hero.getAttribute("class").search("down_init"),-1!==hero.getAttribute("class").search("right_init"));return e.hero_offset_top=hero.offsetTop,e.hero_offset_left=hero.offsetLeft,e.hero_offset_bottom=e.hero_offset_top+hero_size,e.hero_offset_right=e.hero_offset_left+hero_size,e.block_offset_top=level_layer_size-a.bottom-block_size-block_borders_size,e.block_offset_left=a.left,e.block_offset_bottom=e.block_offset_top+block_size,e.block_offset_right=e.block_offset_left+block_size+block_borders_size,e.hero_offset_left_between_block=e.hero_offset_left>e.block_offset_left&&e.hero_offset_left<e.block_offset_right-parseInt(hero_move_pixel/2),e.hero_offset_right_between_block=e.hero_offset_right>e.block_offset_left+parseInt(hero_move_pixel/2)&&e.hero_offset_right<e.block_offset_right,e.hero_offset_top_between_block=e.hero_offset_top>e.block_offset_top&&e.hero_offset_top<e.block_offset_bottom,e.hero_offset_bottom_between_block=e.hero_offset_bottom>e.block_offset_top&&e.hero_offset_bottom<e.block_offset_bottom,e.hero_between_block_horizontal=e.hero_offset_right_between_block||e.hero_offset_left_between_block,e.hero_between_block_vertical=e.hero_offset_top_between_block||e.hero_offset_bottom_between_block,e.hero_offset_top_touch_block_offset_bottom=e.hero_between_block_horizontal&&e.hero_offset_top-e.block_offset_bottom>=-hero_move_pixel&&e.hero_offset_top-e.block_offset_bottom<=0,e.hero_offset_left_touch_block_offset_right=!g&&e.hero_between_block_vertical&&e.hero_offset_left-e.block_offset_right>=-hero_move_pixel&&e.hero_offset_left-e.block_offset_right<=0,e.hero_offset_right_touch_block_offset_left=!f&&e.hero_between_block_vertical&&e.hero_offset_right-e.block_offset_left<=hero_move_pixel&&e.hero_offset_right-e.block_offset_left>=0,e.hero_offset_bottom_touch_block_offset_top=e.hero_between_block_horizontal&&e.hero_offset_bottom-e.block_offset_top<=hero_move_pixel&&e.hero_offset_bottom-e.block_offset_top>=0,e.hero_touch_block=e.hero_offset_bottom_touch_block_offset_top||e.hero_offset_top_touch_block_offset_bottom||e.hero_offset_left_touch_block_offset_right||e.hero_offset_right_touch_block_offset_left,a.when&&a.when>game_complete?!1:(d||("normal"===b&&e.hero_offset_bottom_touch_block_offset_top&&gosquares.block.resolve.normal(c),"stone"===b&&e.hero_touch_block&&gosquares.block.resolve.stone(c),"jump"===b&&e.hero_offset_bottom_touch_block_offset_top&&gosquares.block.resolve.jump(c)),e)},init:function(){gosquares.timerizador_inicio=setInterval(gosquares.counters.clock,clock_delay),document.addEventListener("keyup",function(a){gosquares.game_events.keyup(a)},!1),document.addEventListener("keydown",function(a){gosquares.game_events.keydown(a)},!1),document.addEventListener("touchstart",function(a){gosquares.game_events.touchstart(a)}),document.addEventListener("touchmove",function(a){gosquares.game_events.touchmove(a)}),document.addEventListener("touchend",function(a){gosquares.game_events.touchend(a)}),document.addEventListener("contextmenu",function(a){gosquares.game_events.touchend(a)}),gosquares.fps()}},block:{resolve:{normal:function(a){var b,c,d=gosquares.state.level_blocks.normal_blocks;b=d[a],b.checked!==!0&&(0===a?(b.checked=!0,gosquares.effect.fade_grow_value(a,"success")):a>0&&(c=d[a-1],c.checked===!0?(b.checked=!0,d.length===a+1?gosquares.effect.fade_grow_value(a,"finish"):gosquares.effect.fade_grow_value(a,"success")):current_block_fail!==a&&-1===hero.getAttribute("class").search("up_init")&&(gosquares.effect.fade_grow_value(a,"fail"),current_block_fail=a)))},stone:function(a){gosquares.state.level_blocks.stone_blocks},jump:function(a){gosquares.state.level_blocks.jump_blocks}},when:function(){for(var a,b,c=gosquares.state.level_blocks,d=Object.keys(c),e=0,f=0;f<d.length;f++){a=c[d[f]];for(var g=0;g<a.length;g++)b=block_map.dom[d[f]]["b_"+level_number+"_"+d[f].split("_")[0]+"_"+(g+1)],a[g].checked&&e++,a[g].when&&a[g].when<=e/c[d[0]].length&&"block"!=b.display&&gosquares.effect.block_fade_in(b),game_complete=e/c[d[0]].length}}},effect:{fade_grow_value:function(a,b){var c=a+1,d=document.createElement("span"),e=block_map.dom.normal_blocks["b_"+level_number+"_normal_"+c];d.setAttribute("class","fade_in_element"),d.style.cssText="position:absolute;color:#ffffff;font-weight:bold;right:"+window_game.offsetWidth/2+"px;top:"+window_game.offsetHeight/2+"px;z-index:100;opacity:1.0;font-size:60px;","success"==b?(gosquares.counters.points(),d.innerHTML=c,e.style.background='url("min/images/activo.png") #ffffff',e.style.border="1px dashed #ffffff"):"fail"===b?(gosquares.counters.fails(),d.innerHTML="?",d.style.color="red"):"finish"===b&&(-1!==sound_state&&null!==sound_state||sound_box_dourada.play(),e.style.background='url("min/images/dourado.png") #ffffff',e.style.border="1px dashed #ffffff",gosquares.counters.points(500),window_game.setAttribute("class",window_game.getAttribute("class").replace("inicio","fim")),gosquares.finish()),window_game.appendChild(d);var f=function(){d.style.width=d.innerHTML.length*parseInt(d.style.fontSize)/2+"px",d.style.left=window_game.offsetWidth/2-d.offsetWidth/2+"px",d.style.top=window_game.offsetHeight/2-d.offsetHeight/2+"px",d.style.fontSize=parseInt(d.style.fontSize,10)+15+"px",d.style.opacity=d.style.opacity-.03,d.style.opacity<.05&&(d.parentNode.removeChild(d),clearInterval(g))},g=setInterval(f,e_block_activate_delay)},block_fade_in:function(a){var b=0;if("block"!=a.style.display){a.style.opacity=0,a.style.display="block";var c=function(){b+=.05,a.style.opacity=b,b>=.9&&(a.style.opacity=1,clearInterval(d))},d=setInterval(c,block_fade_in_delay)}},hide_level_numbers_fade_out:function(){var a,b=block_map.dom.block_number[level_number],c=Object.keys(b),d=function(){for(var d=0;d<c.length;d++)a=b[c[d]],a.style.opacity>0&&(a.style.opacity=a.style.opacity-.05);b[c[c.length-1]].style.opacity<=0&&clearInterval(e)},e=setInterval(d,block_fade_in_delay)}},hero:function(){hero.style.left=2*block_size+"px",hero.style.top=0},fps:function(){var a,b,c,d,e,f,g,h,i,j,k,l,m,n=0,o=!1,p=!1,q=function(){if("start"===level_state){moving_x||(hero.setAttribute("class",hero.getAttribute("class").replace("right_init","right_stop")),hero.setAttribute("class",hero.getAttribute("class").replace("left_init","left_stop"))),o=!1,p=!1,gosquares.block.when(),a=gosquares.state.level_blocks,h=hero.offsetTop,k=hero.offsetLeft,j=h+hero_size,i=k+hero_size,l=level_layer.offsetLeft,m=level_layer.offsetWidth,b=-1!==hero.getAttribute("class").search("up_init"),c=-1!==hero.getAttribute("class").search("left_init"),d=-1!==hero.getAttribute("class").search("down_init"),e=-1!==hero.getAttribute("class").search("right_init"),sound_state=null!==sound.getAttribute("class")&&-1!==sound.getAttribute("class").search("silencio")?2:-1;for(var q=0;q<a.normal_blocks.length;q++)if(g=gosquares.game_events.collisions(a.normal_blocks[q],"normal",q),g.hero_offset_bottom_touch_block_offset_top){hero.style.top=g.block_offset_top-hero_size+"px",n=q,o=!0,f="normal";break}if(a.jump_blocks&&a.jump_blocks.length>0&&!o&&!p)for(var r=0;r<a.jump_blocks.length;r++)if(g=gosquares.game_events.collisions(a.jump_blocks[r],"jump",r),g.hero_offset_bottom_touch_block_offset_top){hero.style.top=g.block_offset_top-hero_size+"px",valor_cima=-55,sound_box_vermelha.play(),hero.setAttribute("class",hero.getAttribute("class").replace("up_stop","up_init")),hero.setAttribute("class",hero.getAttribute("class").replace("down_init","down_stop")),f="jump";break}if(a.stone_blocks&&a.stone_blocks.length>0)for(var s=0;s<a.stone_blocks.length;s++)g=gosquares.game_events.collisions(a.stone_blocks[s],"stone",s),g.hero_touch_block&&(g.hero_offset_bottom_touch_block_offset_top?(hero.style.top=g.block_offset_top-hero_size+"px",o=!0):g.hero_offset_top_touch_block_offset_bottom?(hero.style.top=g.block_offset_bottom+block_borders_size+"px",hero.setAttribute("class",hero.getAttribute("class").replace("up_init","up_stop")),hero.setAttribute("class",hero.getAttribute("class").replace("down_stop","down_init")),o=!0):g.hero_offset_left_touch_block_offset_right?(hero.style.left=g.block_offset_right+"px",p=!0):g.hero_offset_right_touch_block_offset_left&&(hero.style.left=g.block_offset_left-hero_size+"px",p=!0));o!==!1||b||d||h===hero_default_top||hero.setAttribute("class",hero.getAttribute("class").replace("down_stop","down_init")),
b?(-1===sound_state&&-27===valor_cima&&sound_jump.play(),o&&-27!==valor_cima?(hero.setAttribute("class",hero.getAttribute("class").replace("up_init","up_stop")),valor_cima=-27):0===valor_cima?(hero.setAttribute("class",hero.getAttribute("class").replace("up_init","up_stop")),hero.setAttribute("class",hero.getAttribute("class").replace("down_stop","down_init")),valor_cima=-27):(hero.style.top=h-hero_move_pixel+"px",valor_cima++)):d&&(o!==!1?hero.setAttribute("class",hero.getAttribute("class").replace("down_init","down_stop")):h+block_borders_size>=hero_default_top?(hero.setAttribute("class",hero.getAttribute("class").replace("down_init","down_stop")),hero.style.top=hero_default_top+"px",gosquares.counters.falls()):hero.style.top=h+hero_move_pixel+"px");var t=window_game.offsetWidth/3;!p&&c&&(k>0?(hero.style.backgroundPosition="0%",hero.style.left=k-hero_move_pixel+"px",k>t&&0>l&&m-t>=k&&(level_layer.style.left=l+hero_move_pixel+"px")):hero.style.left=0),!p&&e&&(m-hero_size-block_borders_size>k?(hero.style.backgroundPosition="100%",hero.style.left=k+hero_move_pixel+"px",k>t&&-l+4<=m-window_game.offsetWidth&&(level_layer.style.left=l-hero_move_pixel+"px")):hero.style.left=m-hero_size)}};setInterval(q,hero_play_delay)},scene_bomb:function(a,b,c){var d=function(){if(a++,-1===b&&sound_tic_tac_bomb.play(),1===a&&(c.style.background='url("min/images/dinamite.png")',gosquares.effect.fade_grow_value(3,"perigo")),3===a&&(c.style.background='url("min/images/dinamite.png")',gosquares.effect.fade_grow_value(1,"perigo")),2===a&&(c.style.background='url("min/images/cinzento.png")',gosquares.effect.fade_grow_value(2,"perigo")),4===a){-1===b&&sound_bomb_rebenta.play(),gosquares.effect.fade_grow_value("BOOOOOMMM","perigo"),c.style.display="none",clearInterval(e);var d=hero.offsetLeft-c.offsetLeft;d>-100&&100>d&&(e_bomb(d),c.style.cssText="")}},e=setInterval(d,scene_bomb_delay)},e_bomb:function(a){if(0>a){det_obj_pers(38,-23);var b=function(){hero.setAttribute("class",hero.getAttribute("class").replace("left_init","left_stop")),det_obj_pers(37,"nada"),-1===hero.getAttribute("class").search("up_init")&&(clearInterval(c),hero.setAttribute("class",hero.getAttribute("class").replace("right_init","right_stop")))},c=setInterval(b,e_bomb_delay)}else if(a>0){det_obj_pers(38,-23);var d=function(){-1!==hero.getAttribute("class").search("right_init")&&hero.setAttribute("class",hero.getAttribute("class").replace("right_init","right_stop")),det_obj_pers(39,"nada"),-1===hero.getAttribute("class").search("up_init")&&(clearInterval(e),hero.setAttribute("class",hero.getAttribute("class").replace("left_init","left_stop")))},e=setInterval(d,e_bomb_delay)}},e_block_verde:function(a){var b=a,c=(a.getAttribute("id"),a.getAttribute("class")),d=a.style.cssText,e=(a.getAttribute("class").split(" ")[1].split("_")[1],c.search("activo"));if(-1===e){b.setAttribute("class",c+" activo");var f=function(){if(b.offsetHeight<3){b.setAttribute("class",""),b.style.cssText="",clearInterval(g),det_obj_pers(0,1);var a=setTimeout(function(){clearInterval(a),gosquares.effect.block_fade_in(b,d,c)},5e3)}b.style.height=b.offsetHeight-1+"px",b.style.bottom=b.offsetBottom+1+"px"},g=setInterval(f,e_block_verde_delay)}},debug:{collisions:function(a){a.hero_offset_bottom_touch_block_offset_top?console.log("TOP"):a.hero_offset_top_touch_block_offset_bottom?console.log("BOTTOM"):a.hero_offset_left_touch_block_offset_right?console.log("RIGHT"):a.hero_offset_right_touch_block_offset_left&&console.log("LEFT")}},init:function(){this.start()}};